apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: harbor
  namespace: default
spec:
  valuesFrom:
  - kind: ConfigMap
    name: harbor-base-config
    valuesKey: config.yaml
  - kind: ConfigMap
    name: harbor-config
    valuesKey: config.yaml
  - kind: Secret
    # generated by base/harbor-secrets.bash
    name: harbor-secrets
    valuesKey: values.yaml
  - kind: Secret
    # generated by s3-secret.bash
    name: s3-secret
    valuesKey: accesskey
    targetPath: persistence.imageChartStorage.s3.accesskey
  - kind: Secret
    name: s3-secret
    valuesKey: secretkey
    targetPath: persistence.imageChartStorage.s3.secretkey
