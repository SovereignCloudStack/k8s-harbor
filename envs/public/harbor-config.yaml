apiVersion: v1
data:
  config.yaml: |
    fullnameOverride: harbor-harbor
    trivy:
      enabled: true
      replicas: 2
    portal:
      replicas: 2
    core:
      replicas: 2
    jobservice:
      replicas: 2
      jobLoggers:
      - database
    registry:
      replicas: 2
    metrics:
      enabled: true
    cache:
      enabled: true
    expose:
      type: ingress
      tls:
        enabled: true
        certSource: secret
        secret:
          secretName: harbor-harbor-ingress
      ingress:
        hosts:
          core: registry.scs.community
        className: nginx
        annotations:
          cert-manager.io/issuer: letsencrypt
          nginx.ingress.kubernetes.io/limit-rps: "25"
          nginx.ingress.kubernetes.io/proxy-request-buffering: "off"
    externalURL: https://registry.scs.community
    database:
      type: internal
    redis:
      type: internal
    persistence:
      enabled: true
      persistentVolumeClaim:
        database:
          size: 64Gi
          storageClass: csi-cinder-sc-retain
        redis:
          size: 64Gi
          storageClass: csi-cinder-sc-retain
        trivy:
          size: 64Gi
          storageClass: csi-cinder-sc-retain
      imageChartStorage:
        type: s3
        s3:
          # generated by s3-credentials.bash
          existingSecret: s3-credentials
          regionendpoint: https://scs2.api.pco.get-cloud.io:8080
          bucket: registry
          region: scs2
kind: ConfigMap
metadata:
  name: harbor-config
